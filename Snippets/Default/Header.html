<!DOCTYPE html>
<html>
<head>
<title>@@title</title>
	
<style>
		@@mop_style_sheet
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" ></script>
<script>
	var bButtons = false;
	var bImageRotationFlipper = false;
	
	function hideButtons(){
		//console.log("hideButtons()");
		$("a.glossyButton").fadeOut(0);
		$("p.glossyButtonText").fadeOut(0);
		bButtons = false;
	}
	
	function showButtons(){
		if( bButtons == false ) {
			//console.log("showButtons()");
			$("a.glossyButton").fadeIn(800);
			$("p.glossyButtonText").fadeIn(1200);
			buttonAppearSfx();
			bButtons = true;
			
			window.setTimeout(function() {
			$('.mop_ClickHint').fadeIn(1000);
		}, 10000);
			
		}
	}
	
	function hideVideoPlayButton(id) {
		var hideId = "#" + id;
		console.log("hideVideoPlayButton() - " + hideId);
		$(hideId).fadeOut(600);
		window.setTimeout(function() {
			$('.mop_Caption').fadeIn(1000);
		}, 2000);
		window.setTimeout(function() {
			$('.mop_Caption').fadeOut(1000);
		}, 12000);
	}
	
	function buttonAppearSfx() {
		//console.log("buttonAppearSfx()");
		var mySfx = document.getElementById('buttonAppearSfx');
		mySfx.play();
	}	

	function rotateImages() {
		//console.log("rotateImages()");
		var imgs = document.getElementsByClassName('mop_ImageCenterAutoSkew');
		var imgsArray = Array.prototype.slice.call(imgs, 0);
		imgsArray.forEach(function(img) {
						  if(bImageRotationFlipper == false) {
							img.style.MozTransform = "rotate(2deg)";
							img.style.webkitTransform = "rotate(2deg)";
							bImageRotationFlipper = true;
						  }
						  else {
							img.style.MozTransform = "rotate(-2deg)";
							img.style.webkitTransform = "rotate(-2deg)";
							bImageRotationFlipper = false;
						  }
	  });
	}	

	function isScrolledIntoView(elem)
	{
		//http://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scroling
		//console.log("isScrolledIntoView - " + elem);
		var docViewTop = $(window).scrollTop();
		var docViewBottom = docViewTop + $(window).height();
		
		var elemTop = $(elem).offset().top;
		var elemBottom = elemTop + $(elem).height();
		
		var bReturn = ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
				&& (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
		
		//console.log( "returning: " + bReturn );
		return bReturn;
	}
	
	function MopShowScore() {
		var tmp = parseInt(localStorage['mop.score']);
		
		document.write("<div class=\"mop_GenericCenter\">\n");
		document.write("<table class=\"mop_ScoreTable\">\n");
		
		document.write("<tr>\n");
		document.write("<td style=\"width:64px;\">SCORE:</td>\n");
		
		var i = 0;
		while(i < parseInt(localStorage['mop.maxScore'])){
			if(i < tmp){
				document.write("<td><img src=\"Images/GoldStar_v2.png\"</img></td>\n");
			}
			else {
				document.write("<td><img src=\"Images/GreyStar_v2.png\"</img></td>\n");
			}
			i++;
		}
		
		document.write("<td style=\"width:64px;\">&nbsp;</td>\n");
		document.write("</tr>\n");
		document.write("</table></div>\n");
	}
	
	function MopSetScore(s) {
		var tmp = parseInt(localStorage['mop.score']);
		tmp = s;
		if(tmp < 0) {
			tmp = 0;
		}
		if(tmp > localStorage['mop.maxScore']) {
			tmp = localStorage['mop.maxScore'];
		}
		localStorage['mop.score'] = tmp;
	}	
	
	function MopHandleScore(s) {
		var tmp = parseInt(localStorage['mop.score']);
		tmp = tmp + s;
		if(tmp < 0) {
			tmp = 0;
		}
		if(tmp > localStorage['mop.maxScore']) {
			tmp = localStorage['mop.maxScore'];
		}
		localStorage['mop.score'] = tmp;
	}	
</script>

</head>